"use strict";var JeelizResizer=function(){let t=null,e=null,n=0,i=1,r=!1,o=!1,s=!1,a=!1;const c=[[640,480],[768,480],[800,600],[960,640],[960,720],[1024,768],[1280,720],[1920,1080]];function d(t,e){var n,i;t[0]/t[1]>e[0]/e[1]?(n=t,i=e):(n=e,i=t);const r=Math.min(n[0],i[0])*Math.min(n[1],i[1]);var o;return n[0]>=i[0]&&n[1]>=i[1]?o=n[0]*n[1]:i[0]>n[0]&&i[1]>n[1]?o=i[0]*i[1]:(o=n[0]*n[1],o+=(i[1]-n[1])*i[0]),r/o}function u(){const n=t.getBoundingClientRect();e=[Math.round(i*n.width),Math.round(i*n.height)],t.setAttribute("width",e[0]),t.setAttribute("height",e[1])}function l(){o&&clearTimeout(o),o=setTimeout(v,50)}function h(){e=[window.innerWidth,window.innerHeight],a&&e.reverse(),t.setAttribute("width",e[0]),t.setAttribute("height",e[1])}function v(){h(),JEEFACEFILTERAPI.resize(),o=!1,s&&s()}const g={is_portrait:function(){try{return!!window.matchMedia("(orientation: portrait)").matches}catch(t){return window.innerHeight>window.innerWidth}},check_isIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},get_IOSVersion:function(){const t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return t.length>2?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]:[0,0,0]},check_isAndroid:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")},get_androidVersion:function(){const t=navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/i);if(!t||t.length<2)return[0,0,0];const e=t[1].split(".");return[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2]||0,10)]},require_flipVideoWHIfPortrait:function(){return!0},size_canvas:function(o){if(t=o.canvas?o.canvas:document.getElementById(o.canvasId),r=void 0!==o.isFullScreen&&o.isFullScreen,a=void 0!==o.isInvWH&&o.isInvWH,r)void 0!==o.onResize&&(s=o.onResize),h(),window.addEventListener("resize",l,!1),window.addEventListener("orientationchange",l,!1);else{const e=t.getBoundingClientRect();if(0===e.width||0===e.height)return console.log("WARNING in JeelizResize.size_canvas() : the canvas has its width or its height null, Retry a bit later..."),++n>20?void o.callback("CANNOT_RESIZECANVAS"):void setTimeout(g.size_canvas.bind(null,o),50);n=0,i=void 0===o.overSamplingFactor?1:o.overSamplingFactor,u()}void 0!==o.CSSFlipX&&o.CSSFlipX&&function(t,e){const n=t.style.transform;-1===n.indexOf(e)&&(t.style.transform=e+" "+n)}(t,"rotateY(180deg)");const v=c.slice(0);g.is_portrait()&&g.require_flipVideoWHIfPortrait()&&v.forEach(function(t){t.reverse()});const f=window.devicePixelRatio?window.devicePixelRatio:1,w=[e[0]*f,e[1]*f];v.sort(function(t,e){return d(e,w)-d(t,w)});const I={idealWidth:v[0][0],idealHeight:v[0][1]};console.log("INFO in JeelizResizer: bestCameraResolution =",I),setTimeout(o.callback.bind(null,!1,I),1)},resize_canvas:function(){r||u()}};return g}();