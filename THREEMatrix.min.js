"use strict";var THREE={Quaternion:function(t,i,s,n){this._x=t||0,this._y=i||0,this._z=s||0,this._w=void 0!==n?n:1}};THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,i,s,n){return this._x=t,this._y=i,this._z=s,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,i){if(t instanceof THREE.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var s=Math.cos(t._x/2),n=Math.cos(t._y/2),r=Math.cos(t._z/2),e=Math.sin(t._x/2),h=Math.sin(t._y/2),o=Math.sin(t._z/2),a=t.order;return"XYZ"===a?(this._x=e*n*r+s*h*o,this._y=s*h*r-e*n*o,this._z=s*n*o+e*h*r,this._w=s*n*r-e*h*o):"YXZ"===a?(this._x=e*n*r+s*h*o,this._y=s*h*r-e*n*o,this._z=s*n*o-e*h*r,this._w=s*n*r+e*h*o):"ZXY"===a?(this._x=e*n*r-s*h*o,this._y=s*h*r+e*n*o,this._z=s*n*o+e*h*r,this._w=s*n*r-e*h*o):"ZYX"===a?(this._x=e*n*r-s*h*o,this._y=s*h*r+e*n*o,this._z=s*n*o-e*h*r,this._w=s*n*r+e*h*o):"YZX"===a?(this._x=e*n*r+s*h*o,this._y=s*h*r+e*n*o,this._z=s*n*o-e*h*r,this._w=s*n*r-e*h*o):"XZY"===a&&(this._x=e*n*r-s*h*o,this._y=s*h*r-e*n*o,this._z=s*n*o+e*h*r,this._w=s*n*r+e*h*o),!1!==i&&this.onChangeCallback(),this},setFromAxisAngle:function(t,i){var s=i/2,n=Math.sin(s);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(s),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var i,s=t.elements,n=s[0],r=s[4],e=s[8],h=s[1],o=s[5],a=s[9],u=s[2],c=s[6],l=s[10],y=n+o+l;return y>0?(i=.5/Math.sqrt(y+1),this._w=.25/i,this._x=(c-a)*i,this._y=(e-u)*i,this._z=(h-r)*i):n>o&&n>l?(i=2*Math.sqrt(1+n-o-l),this._w=(c-a)/i,this._x=.25*i,this._y=(r+h)/i,this._z=(e+u)/i):o>l?(i=2*Math.sqrt(1+o-n-l),this._w=(e-u)/i,this._x=(r+h)/i,this._y=.25*i,this._z=(a+c)/i):(i=2*Math.sqrt(1+l-n-o),this._w=(h-r)/i,this._x=(e+u)/i,this._y=(a+c)/i,this._z=.25*i),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,i;return function(s,n){return void 0===t&&(t=new THREE.Vector3),(i=s.dot(n)+1)<1e-6?(i=0,Math.abs(s.x)>Math.abs(s.z)?t.set(-s.y,s.x,0):t.set(0,-s.z,s.y)):t.crossVectors(s,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=i,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,i){return void 0!==i?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var s=t._x,n=t._y,r=t._z,e=t._w,h=i._x,o=i._y,a=i._z,u=i._w;return this._x=s*u+e*h+n*a-r*o,this._y=n*u+e*o+r*h-s*a,this._z=r*u+e*a+s*o-n*h,this._w=e*u-s*h-n*o-r*a,this.onChangeCallback(),this},multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var s=this._x,n=this._y,r=this._z,e=this._w,h=e*t._w+s*t._x+n*t._y+r*t._z;if(h<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,h=-h):this.copy(t),h>=1)return this._w=e,this._x=s,this._y=n,this._z=r,this;var o=Math.acos(h),a=Math.sqrt(1-h*h);if(Math.abs(a)<.001)return this._w=.5*(e+this._w),this._x=.5*(s+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var u=Math.sin((1-i)*o)/a,c=Math.sin(i*o)/a;return this._w=e*u+this._w*c,this._x=s*u+this._x*c,this._y=n*u+this._y*c,this._z=r*u+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,i){return void 0===i&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this.onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},THREE.Quaternion.slerp=function(t,i,s,n){return s.copy(t).slerp(i,n)},THREE.Vector2=function(t,i){this.x=t||0,this.y=i||0},THREE.Vector2.prototype={constructor:THREE.Vector2,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,i){return this.x=t,this.y=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,i){return void 0!==i?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this},sub:function(t,i){return void 0!==i?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this},clampScalar:function(){var t,i;return function(s,n){return void 0===t&&(t=new THREE.Vector2,i=new THREE.Vector2),t.set(s,s),i.set(n,n),this.clamp(t,i)}}(),clampLength:function(t,i){var s=this.length();return this.multiplyScalar(Math.max(t,Math.min(i,s))/s),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,s=this.y-t.y;return i*i+s*s},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this},lerpVectors:function(t,i,s){return this.subVectors(i,t).multiplyScalar(s).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t},fromAttribute:function(t,i,s){return void 0===s&&(s=0),i=i*t.itemSize+s,this.x=t.array[i],this.y=t.array[i+1],this},rotateAround:function(t,i){var s=Math.cos(i),n=Math.sin(i),r=this.x-t.x,e=this.y-t.y;return this.x=r*s-e*n+t.x,this.y=r*n+e*s+t.y,this}},THREE.Vector3=function(t,i,s){this.x=t||0,this.y=i||0,this.z=s||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(t,i,s){return this.x=t,this.y=i,this.z=s,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this},sub:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},multiply:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this},applyEuler:function(){var t;return function(i){return i instanceof THREE.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new THREE.Quaternion),this.applyQuaternion(t.setFromEuler(i)),this}}(),applyAxisAngle:function(){var t;return function(i,s){return void 0===t&&(t=new THREE.Quaternion),this.applyQuaternion(t.setFromAxisAngle(i,s)),this}}(),applyMatrix3:function(t){var i=this.x,s=this.y,n=this.z,r=t.elements;return this.x=r[0]*i+r[3]*s+r[6]*n,this.y=r[1]*i+r[4]*s+r[7]*n,this.z=r[2]*i+r[5]*s+r[8]*n,this},applyMatrix4:function(t){var i=this.x,s=this.y,n=this.z,r=t.elements;return this.x=r[0]*i+r[4]*s+r[8]*n+r[12],this.y=r[1]*i+r[5]*s+r[9]*n+r[13],this.z=r[2]*i+r[6]*s+r[10]*n+r[14],this},applyProjection:function(t){var i=this.x,s=this.y,n=this.z,r=t.elements,e=1/(r[3]*i+r[7]*s+r[11]*n+r[15]);return this.x=(r[0]*i+r[4]*s+r[8]*n+r[12])*e,this.y=(r[1]*i+r[5]*s+r[9]*n+r[13])*e,this.z=(r[2]*i+r[6]*s+r[10]*n+r[14])*e,this},applyQuaternion:function(t){var i=this.x,s=this.y,n=this.z,r=t.x,e=t.y,h=t.z,o=t.w,a=o*i+e*n-h*s,u=o*s+h*i-r*n,c=o*n+r*s-e*i,l=-r*i-e*s-h*n;return this.x=a*o+l*-r+u*-h-c*-e,this.y=u*o+l*-e+c*-r-a*-h,this.z=c*o+l*-h+a*-e-u*-r,this},project:function(){var t;return function(i){return void 0===t&&(t=new THREE.Matrix4),t.multiplyMatrices(i.projectionMatrix,t.getInverse(i.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(i){return void 0===t&&(t=new THREE.Matrix4),t.multiplyMatrices(i.matrixWorld,t.getInverse(i.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var i=this.x,s=this.y,n=this.z,r=t.elements;return this.x=r[0]*i+r[4]*s+r[8]*n,this.y=r[1]*i+r[5]*s+r[9]*n,this.z=r[2]*i+r[6]*s+r[10]*n,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this},clampScalar:function(){var t,i;return function(s,n){return void 0===t&&(t=new THREE.Vector3,i=new THREE.Vector3),t.set(s,s,s),i.set(n,n,n),this.clamp(t,i)}}(),clampLength:function(t,i){var s=this.length();return this.multiplyScalar(Math.max(t,Math.min(i,s))/s),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},lerpVectors:function(t,i,s){return this.subVectors(i,t).multiplyScalar(s).add(t),this},cross:function(t,i){if(void 0!==i)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i);var s=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-s*t.z,this.z=s*t.y-n*t.x,this},crossVectors:function(t,i){var s=t.x,n=t.y,r=t.z,e=i.x,h=i.y,o=i.z;return this.x=n*o-r*h,this.y=r*e-s*o,this.z=s*h-n*e,this},projectOnVector:function(){var t,i;return function(s){return void 0===t&&(t=new THREE.Vector3),t.copy(s).normalize(),i=this.dot(t),this.copy(t).multiplyScalar(i)}}(),projectOnPlane:function(){var t;return function(i){return void 0===t&&(t=new THREE.Vector3),t.copy(this).projectOnVector(i),this.sub(t)}}(),reflect:function(){var t;return function(i){return void 0===t&&(t=new THREE.Vector3),this.sub(t.copy(i).multiplyScalar(2*this.dot(i)))}}(),angleTo:function(t){var i=this.dot(t)/(this.length()*t.length());return Math.acos(THREE.Math.clamp(i,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,s=this.y-t.y,n=this.z-t.z;return i*i+s*s+n*n},setEulerFromRotationMatrix:function(t,i){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(t,i){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,i){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,i)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var i=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),s=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),n=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=i,this.y=s,this.z=n,this},setFromMatrixColumn:function(t,i){var s=4*t,n=i.elements;return this.x=n[s],this.y=n[s+1],this.z=n[s+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t},fromAttribute:function(t,i,s){return void 0===s&&(s=0),i=i*t.itemSize+s,this.x=t.array[i],this.y=t.array[i+1],this.z=t.array[i+2],this}},THREE.Vector4=function(t,i,s,n){this.x=t||0,this.y=i||0,this.z=s||0,this.w=void 0!==n?n:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(t,i,s,n){return this.x=t,this.y=i,this.z=s,this.w=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,i){return void 0!==i?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this},sub:function(t,i){return void 0!==i?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var i=this.x,s=this.y,n=this.z,r=this.w,e=t.elements;return this.x=e[0]*i+e[4]*s+e[8]*n+e[12]*r,this.y=e[1]*i+e[5]*s+e[9]*n+e[13]*r,this.z=e[2]*i+e[6]*s+e[10]*n+e[14]*r,this.w=e[3]*i+e[7]*s+e[11]*n+e[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this},setAxisAngleFromRotationMatrix:function(t){var i,s,n,r,e=t.elements,h=e[0],o=e[4],a=e[8],u=e[1],c=e[5],l=e[9],y=e[2],x=e[6],f=e[10];if(Math.abs(o-u)<.01&&Math.abs(a-y)<.01&&Math.abs(l-x)<.01){if(Math.abs(o+u)<.1&&Math.abs(a+y)<.1&&Math.abs(l+x)<.1&&Math.abs(h+c+f-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;var m=(h+1)/2,d=(c+1)/2,M=(f+1)/2,z=(o+u)/4,_=(a+y)/4,E=(l+x)/4;return m>d&&m>M?m<.01?(s=0,n=.707106781,r=.707106781):(n=z/(s=Math.sqrt(m)),r=_/s):d>M?d<.01?(s=.707106781,n=0,r=.707106781):(s=z/(n=Math.sqrt(d)),r=E/n):M<.01?(s=.707106781,n=.707106781,r=0):(s=_/(r=Math.sqrt(M)),n=E/r),this.set(s,n,r,i),this}var w=Math.sqrt((x-l)*(x-l)+(a-y)*(a-y)+(u-o)*(u-o));return Math.abs(w)<.001&&(w=1),this.x=(x-l)/w,this.y=(a-y)/w,this.z=(u-o)/w,this.w=Math.acos((h+c+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this},clampScalar:function(){var t,i;return function(s,n){return void 0===t&&(t=new THREE.Vector4,i=new THREE.Vector4),t.set(s,s,s,s),i.set(n,n,n,n),this.clamp(t,i)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this},lerpVectors:function(t,i,s){return this.subVectors(i,t).multiplyScalar(s).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t},fromAttribute:function(t,i,s){return void 0===s&&(s=0),i=i*t.itemSize+s,this.x=t.array[i],this.y=t.array[i+1],this.z=t.array[i+2],this.w=t.array[i+3],this}},THREE.Euler=function(t,i,s,n){this._x=t||0,this._y=i||0,this._z=s||0,this._order=n||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,i,s,n){return this._x=t,this._y=i,this._z=s,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,i,s){var n=THREE.Math.clamp,r=t.elements,e=r[0],h=r[4],o=r[8],a=r[1],u=r[5],c=r[9],l=r[2],y=r[6],x=r[10];return"XYZ"===(i=i||this._order)?(this._y=Math.asin(n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-c,x),this._z=Math.atan2(-h,e)):(this._x=Math.atan2(y,u),this._z=0)):"YXZ"===i?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(o,x),this._z=Math.atan2(a,u)):(this._y=Math.atan2(-l,e),this._z=0)):"ZXY"===i?(this._x=Math.asin(n(y,-1,1)),Math.abs(y)<.99999?(this._y=Math.atan2(-l,x),this._z=Math.atan2(-h,u)):(this._y=0,this._z=Math.atan2(a,e))):"ZYX"===i?(this._y=Math.asin(-n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(y,x),this._z=Math.atan2(a,e)):(this._x=0,this._z=Math.atan2(-h,u))):"YZX"===i?(this._z=Math.asin(n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,e)):(this._x=0,this._y=Math.atan2(o,x))):"XZY"===i?(this._z=Math.asin(-n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(y,u),this._y=Math.atan2(o,e)):(this._x=Math.atan2(-c,x),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+i),this._order=i,!1!==s&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(i,s,n){return void 0===t&&(t=new THREE.Matrix4),t.makeRotationFromQuaternion(i),this.setFromRotationMatrix(t,s,n),this}}(),setFromVector3:function(t,i){return this.set(t.x,t.y,t.z,i||this._order)},reorder:function(){var t=new THREE.Quaternion;return function(i){t.setFromEuler(this),this.setFromQuaternion(t,i)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(t,i,s,n,r,e,h,o,a){var u=this.elements;return u[0]=t,u[3]=i,u[6]=s,u[1]=n,u[4]=r,u[7]=e,u[2]=h,u[5]=o,u[8]=a,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var i=t.elements;return this.set(i[0],i[3],i[6],i[1],i[4],i[7],i[2],i[5],i[8]),this},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t;return function(i,s,n){void 0===t&&(t=new THREE.Vector3),void 0===s&&(s=0),void 0===n&&(n=i.length);for(var r=0,e=s;r<n;r+=3,e+=3)t.fromArray(i,e),t.applyMatrix3(this),t.toArray(i,e);return i}}(),applyToBuffer:function(){var t;return function(i,s,n){void 0===t&&(t=new THREE.Vector3),void 0===s&&(s=0),void 0===n&&(n=i.length/i.itemSize);for(var r=0,e=s;r<n;r++,e++)t.x=i.getX(e),t.y=i.getY(e),t.z=i.getZ(e),t.applyMatrix3(this),i.setXYZ(t.x,t.y,t.z);return i}}(),multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this},determinant:function(){var t=this.elements,i=t[0],s=t[1],n=t[2],r=t[3],e=t[4],h=t[5],o=t[6],a=t[7],u=t[8];return i*e*u-i*h*a-s*r*u+s*h*o+n*r*a-n*e*o},getInverse:function(t,i){var s=t.elements,n=this.elements;n[0]=s[10]*s[5]-s[6]*s[9],n[1]=-s[10]*s[1]+s[2]*s[9],n[2]=s[6]*s[1]-s[2]*s[5],n[3]=-s[10]*s[4]+s[6]*s[8],n[4]=s[10]*s[0]-s[2]*s[8],n[5]=-s[6]*s[0]+s[2]*s[4],n[6]=s[9]*s[4]-s[5]*s[8],n[7]=-s[9]*s[0]+s[1]*s[8],n[8]=s[5]*s[0]-s[1]*s[4];var r=s[0]*n[0]+s[1]*n[3]+s[2]*n[6];if(0===r){var e="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(e);return console.warn(e),this.identity(),this}return this.multiplyScalar(1/r),this},transpose:function(){var t,i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this},flattenToArrayOffset:function(t,i){var s=this.elements;return t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3],t[i+4]=s[4],t[i+5]=s[5],t[i+6]=s[6],t[i+7]=s[7],t[i+8]=s[8],t},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}},THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(t,i,s,n,r,e,h,o,a,u,c,l,y,x,f,m){var d=this.elements;return d[0]=t,d[4]=i,d[8]=s,d[12]=n,d[1]=r,d[5]=e,d[9]=h,d[13]=o,d[2]=a,d[6]=u,d[10]=c,d[14]=l,d[3]=y,d[7]=x,d[11]=f,d[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},copyPosition:function(t){var i=this.elements,s=t.elements;return i[12]=s[12],i[13]=s[13],i[14]=s[14],this},extractBasis:function(t,i,s){var n=this.elements;return t.set(n[0],n[1],n[2]),i.set(n[4],n[5],n[6]),s.set(n[8],n[9],n[10]),this},makeBasis:function(t,i,s){return this.set(t.x,i.x,s.x,0,t.y,i.y,s.y,0,t.z,i.z,s.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(i){void 0===t&&(t=new THREE.Vector3);var s=this.elements,n=i.elements,r=1/t.set(n[0],n[1],n[2]).length(),e=1/t.set(n[4],n[5],n[6]).length(),h=1/t.set(n[8],n[9],n[10]).length();return s[0]=n[0]*r,s[1]=n[1]*r,s[2]=n[2]*r,s[4]=n[4]*e,s[5]=n[5]*e,s[6]=n[6]*e,s[8]=n[8]*h,s[9]=n[9]*h,s[10]=n[10]*h,this}}(),makeRotationFromEuler:function(t){t instanceof THREE.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=this.elements,s=t.x,n=t.y,r=t.z,e=Math.cos(s),h=Math.sin(s),o=Math.cos(n),a=Math.sin(n),u=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var l=e*u,y=e*c,x=h*u,f=h*c;i[0]=o*u,i[4]=-o*c,i[8]=a,i[1]=y+x*a,i[5]=l-f*a,i[9]=-h*o,i[2]=f-l*a,i[6]=x+y*a,i[10]=e*o}else if("YXZ"===t.order){var m=o*u,d=o*c,M=a*u,z=a*c;i[0]=m+z*h,i[4]=M*h-d,i[8]=e*a,i[1]=e*c,i[5]=e*u,i[9]=-h,i[2]=d*h-M,i[6]=z+m*h,i[10]=e*o}else if("ZXY"===t.order){m=o*u,d=o*c,M=a*u,z=a*c;i[0]=m-z*h,i[4]=-e*c,i[8]=M+d*h,i[1]=d+M*h,i[5]=e*u,i[9]=z-m*h,i[2]=-e*a,i[6]=h,i[10]=e*o}else if("ZYX"===t.order){l=e*u,y=e*c,x=h*u,f=h*c;i[0]=o*u,i[4]=x*a-y,i[8]=l*a+f,i[1]=o*c,i[5]=f*a+l,i[9]=y*a-x,i[2]=-a,i[6]=h*o,i[10]=e*o}else if("YZX"===t.order){var _=e*o,E=e*a,w=h*o,p=h*a;i[0]=o*u,i[4]=p-_*c,i[8]=w*c+E,i[1]=c,i[5]=e*u,i[9]=-h*u,i[2]=-a*u,i[6]=E*c+w,i[10]=_-p*c}else if("XZY"===t.order){_=e*o,E=e*a,w=h*o,p=h*a;i[0]=o*u,i[4]=-c,i[8]=a*u,i[1]=_*c+p,i[5]=e*u,i[9]=E*c-w,i[2]=w*c-E,i[6]=h*u,i[10]=p*c+_}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},makeRotationFromQuaternion:function(t){var i=this.elements,s=t.x,n=t.y,r=t.z,e=t.w,h=s+s,o=n+n,a=r+r,u=s*h,c=s*o,l=s*a,y=n*o,x=n*a,f=r*a,m=e*h,d=e*o,M=e*a;return i[0]=1-(y+f),i[4]=c-M,i[8]=l+d,i[1]=c+M,i[5]=1-(u+f),i[9]=x-m,i[2]=l-d,i[6]=x+m,i[10]=1-(u+y),i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},lookAt:function(){var t,i,s;return function(n,r,e){void 0===t&&(t=new THREE.Vector3),void 0===i&&(i=new THREE.Vector3),void 0===s&&(s=new THREE.Vector3);var h=this.elements;return s.subVectors(n,r).normalize(),0===s.lengthSq()&&(s.z=1),t.crossVectors(e,s).normalize(),0===t.lengthSq()&&(s.x+=1e-4,t.crossVectors(e,s).normalize()),i.crossVectors(s,t),h[0]=t.x,h[4]=i.x,h[8]=s.x,h[1]=t.y,h[5]=i.y,h[9]=s.y,h[2]=t.z,h[6]=i.z,h[10]=s.z,this}}(),multiply:function(t,i){return void 0!==i?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,i){var s=t.elements,n=i.elements,r=this.elements,e=s[0],h=s[4],o=s[8],a=s[12],u=s[1],c=s[5],l=s[9],y=s[13],x=s[2],f=s[6],m=s[10],d=s[14],M=s[3],z=s[7],_=s[11],E=s[15],w=n[0],p=n[4],v=n[8],g=n[12],R=n[1],T=n[5],b=n[9],V=n[13],H=n[2],C=n[6],S=n[10],A=n[14],F=n[3],k=n[7],Z=n[11],X=n[15];return r[0]=e*w+h*R+o*H+a*F,r[4]=e*p+h*T+o*C+a*k,r[8]=e*v+h*b+o*S+a*Z,r[12]=e*g+h*V+o*A+a*X,r[1]=u*w+c*R+l*H+y*F,r[5]=u*p+c*T+l*C+y*k,r[9]=u*v+c*b+l*S+y*Z,r[13]=u*g+c*V+l*A+y*X,r[2]=x*w+f*R+m*H+d*F,r[6]=x*p+f*T+m*C+d*k,r[10]=x*v+f*b+m*S+d*Z,r[14]=x*g+f*V+m*A+d*X,r[3]=M*w+z*R+_*H+E*F,r[7]=M*p+z*T+_*C+E*k,r[11]=M*v+z*b+_*S+E*Z,r[15]=M*g+z*V+_*A+E*X,this},multiplyToArray:function(t,i,s){var n=this.elements;return this.multiplyMatrices(t,i),s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],this},multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t;return function(i,s,n){void 0===t&&(t=new THREE.Vector3),void 0===s&&(s=0),void 0===n&&(n=i.length);for(var r=0,e=s;r<n;r+=3,e+=3)t.fromArray(i,e),t.applyMatrix4(this),t.toArray(i,e);return i}}(),applyToBuffer:function(){var t;return function(i,s,n){void 0===t&&(t=new THREE.Vector3),void 0===s&&(s=0),void 0===n&&(n=i.length/i.itemSize);for(var r=0,e=s;r<n;r++,e++)t.x=i.getX(e),t.y=i.getY(e),t.z=i.getZ(e),t.applyMatrix4(this),i.setXYZ(t.x,t.y,t.z);return i}}(),rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},determinant:function(){var t=this.elements,i=t[0],s=t[4],n=t[8],r=t[12],e=t[1],h=t[5],o=t[9],a=t[13],u=t[2],c=t[6],l=t[10],y=t[14];return t[3]*(+r*o*c-n*a*c-r*h*l+s*a*l+n*h*y-s*o*y)+t[7]*(+i*o*y-i*a*l+r*e*l-n*e*y+n*a*u-r*o*u)+t[11]*(+i*a*c-i*h*y-r*e*c+s*e*y+r*h*u-s*a*u)+t[15]*(-n*h*u-i*o*c+i*h*l+n*e*c-s*e*l+s*o*u)},transpose:function(){var t,i=this.elements;return t=i[1],i[1]=i[4],i[4]=t,t=i[2],i[2]=i[8],i[8]=t,t=i[6],i[6]=i[9],i[9]=t,t=i[3],i[3]=i[12],i[12]=t,t=i[7],i[7]=i[13],i[13]=t,t=i[11],i[11]=i[14],i[14]=t,this},flattenToArrayOffset:function(t,i){var s=this.elements;return t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3],t[i+4]=s[4],t[i+5]=s[5],t[i+6]=s[6],t[i+7]=s[7],t[i+8]=s[8],t[i+9]=s[9],t[i+10]=s[10],t[i+11]=s[11],t[i+12]=s[12],t[i+13]=s[13],t[i+14]=s[14],t[i+15]=s[15],t},getPosition:function(){var t;return function(){void 0===t&&(t=new THREE.Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var i=this.elements;return t.set(i[12],i[13],i[14])}}(),setPosition:function(t){var i=this.elements;return i[12]=t.x,i[13]=t.y,i[14]=t.z,this},getInverse:function(t,i){var s=this.elements,n=t.elements,r=n[0],e=n[4],h=n[8],o=n[12],a=n[1],u=n[5],c=n[9],l=n[13],y=n[2],x=n[6],f=n[10],m=n[14],d=n[3],M=n[7],z=n[11],_=n[15];s[0]=c*m*M-l*f*M+l*x*z-u*m*z-c*x*_+u*f*_,s[4]=o*f*M-h*m*M-o*x*z+e*m*z+h*x*_-e*f*_,s[8]=h*l*M-o*c*M+o*u*z-e*l*z-h*u*_+e*c*_,s[12]=o*c*x-h*l*x-o*u*f+e*l*f+h*u*m-e*c*m,s[1]=l*f*d-c*m*d-l*y*z+a*m*z+c*y*_-a*f*_,s[5]=h*m*d-o*f*d+o*y*z-r*m*z-h*y*_+r*f*_,s[9]=o*c*d-h*l*d-o*a*z+r*l*z+h*a*_-r*c*_,s[13]=h*l*y-o*c*y+o*a*f-r*l*f-h*a*m+r*c*m,s[2]=u*m*d-l*x*d+l*y*M-a*m*M-u*y*_+a*x*_,s[6]=o*x*d-e*m*d-o*y*M+r*m*M+e*y*_-r*x*_,s[10]=e*l*d-o*u*d+o*a*M-r*l*M-e*a*_+r*u*_,s[14]=o*u*y-e*l*y-o*a*x+r*l*x+e*a*m-r*u*m,s[3]=c*x*d-u*f*d-c*y*M+a*f*M+u*y*z-a*x*z,s[7]=e*f*d-h*x*d+h*y*M-r*f*M-e*y*z+r*x*z,s[11]=h*u*d-e*c*d-h*a*M+r*c*M+e*a*z-r*u*z,s[15]=e*c*y-h*u*y+h*a*x-r*c*x-e*a*f+r*u*f;var E=r*s[0]+a*s[4]+y*s[8]+d*s[12];if(0===E){var w="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(w);return console.warn(w),this.identity(),this}return this.multiplyScalar(1/E),this},translate:function(t){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(t){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(t){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(t){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(t,i){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(t){var i=this.elements,s=t.x,n=t.y,r=t.z;return i[0]*=s,i[4]*=n,i[8]*=r,i[1]*=s,i[5]*=n,i[9]*=r,i[2]*=s,i[6]*=n,i[10]*=r,i[3]*=s,i[7]*=n,i[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,s,n))},makeTranslation:function(t,i,s){return this.set(1,0,0,t,0,1,0,i,0,0,1,s,0,0,0,1),this},makeRotationX:function(t){var i=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,i,-s,0,0,s,i,0,0,0,0,1),this},makeRotationY:function(t){var i=Math.cos(t),s=Math.sin(t);return this.set(i,0,s,0,0,1,0,0,-s,0,i,0,0,0,0,1),this},makeRotationZ:function(t){var i=Math.cos(t),s=Math.sin(t);return this.set(i,-s,0,0,s,i,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,i){var s=Math.cos(i),n=Math.sin(i),r=1-s,e=t.x,h=t.y,o=t.z,a=r*e,u=r*h;return this.set(a*e+s,a*h-n*o,a*o+n*h,0,a*h+n*o,u*h+s,u*o-n*e,0,a*o-n*h,u*o+n*e,r*o*o+s,0,0,0,0,1),this},makeScale:function(t,i,s){return this.set(t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1),this},compose:function(t,i,s){return this.makeRotationFromQuaternion(i),this.scale(s),this.setPosition(t),this},decompose:function(){var t,i;return function(s,n,r){void 0===t&&(t=new THREE.Vector3),void 0===i&&(i=new THREE.Matrix4);var e=this.elements,h=t.set(e[0],e[1],e[2]).length(),o=t.set(e[4],e[5],e[6]).length(),a=t.set(e[8],e[9],e[10]).length();this.determinant()<0&&(h=-h),s.x=e[12],s.y=e[13],s.z=e[14],i.elements.set(this.elements);var u=1/h,c=1/o,l=1/a;return i.elements[0]*=u,i.elements[1]*=u,i.elements[2]*=u,i.elements[4]*=c,i.elements[5]*=c,i.elements[6]*=c,i.elements[8]*=l,i.elements[9]*=l,i.elements[10]*=l,n.setFromRotationMatrix(i),r.x=h,r.y=o,r.z=a,this}}(),makeFrustum:function(t,i,s,n,r,e){var h=this.elements,o=2*r/(i-t),a=2*r/(n-s),u=(i+t)/(i-t),c=(n+s)/(n-s),l=-(e+r)/(e-r),y=-2*e*r/(e-r);return h[0]=o,h[4]=0,h[8]=u,h[12]=0,h[1]=0,h[5]=a,h[9]=c,h[13]=0,h[2]=0,h[6]=0,h[10]=l,h[14]=y,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this},makePerspective:function(t,i,s,n){var r=s*Math.tan(THREE.Math.degToRad(.5*t)),e=-r,h=e*i,o=r*i;return this.makeFrustum(h,o,e,r,s,n)},makeOrthographic:function(t,i,s,n,r,e){var h=this.elements,o=i-t,a=s-n,u=e-r,c=(i+t)/o,l=(s+n)/a,y=(e+r)/u;return h[0]=2/o,h[4]=0,h[8]=0,h[12]=-c,h[1]=0,h[5]=2/a,h[9]=0,h[13]=-l,h[2]=0,h[6]=0,h[10]=-2/u,h[14]=-y,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this},equals:function(t){for(var i=this.elements,s=t.elements,n=0;n<16;n++)if(i[n]!==s[n])return!1;return!0},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}};